@model IList<IWebPhoto>

<div id="PhotoViewerPadding"></div>

<div id="PhotoViewer">
	<img class="photo" />
	<div class="bottomBar" id="PhotoViewBar">
		<p class="details"></p>
		<div class="buttons">
			<a href="#" title="Tag Mode" onclick="toggleTagMode(); return false;">
				<img src="@Url.Content("~/Content/gallery/tag.png")"/>
			</a>
			<a href="#" title="Previous Photo" onclick="prevPhoto(); return false;">
				<img src="@Url.Content("~/Content/gallery/arrow-left.png")"/>
			</a>
			<a href="#" title="Next Photo" onclick="nextPhoto(); return false;">
				<img src="@Url.Content("~/Content/gallery/arrow-right.png")"/>
			</a>
			<a href="#" title="Close Photo" onclick="closePhoto(); return false;">
				<img src="@Url.Content("~/Content/gallery/close.png")"/>
			</a>
		</div>
	</div>

	@{ Html.RenderPartial(MVC.Main.Shared.Views._TagLayer); }

	<div class="bottomBar tagBar" id="TagModeBar">
		<a href="#" title="Tag Mode" onclick="toggleTagMode(); return false;">
			Done
		</a>
	</div>
</div>
<script type="text/javascript" src="@Url.Content("~/Scripts/gallery/photoViewer.js")"></script>

<script type="text/javascript">
	initPhotoView();

	initTagSearch(
		'@Url.Action(MVC.Main.Photos.Tags("", null))/',
		'@Url.Action(MVC.Main.Photos.AddTag())/'
	);

	@foreach ( IWebPhoto p in Model ) {
		string url = Url.Content("~"+p.ImageUrl);
		<text>registerPhoto(@p.PhotoId, '@url', '@p.Created', @p.Ratio);</text>
	}

	viewPhoto(6554);
</script>